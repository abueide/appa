# Appa Secrets Configuration
# Managed by SOPS plugin with multiple backend support

metadata:
  version: "1.0"
  backend: "sops"

# SOPS configuration
sops:
  keys:
    # Age keys for local development
    age:
      - "age1ql3z7hjy54pw9hyww5ayyfg7zqgvc7w3j2elw8zmrj2kg5sfn9aqmcac8p"

    # GPG keys for team members
    pgp:
      - "FBC7B9E2A4F9289AC0C1D4843D16CEE4A27381B4"  # alice@home.lab
      - "E39B8FDC8F3E4326B7F9D8C5E1A2B3C4D5E6F7G8"  # bob@home.lab

# Secret definitions (encrypted by SOPS)
secrets:
  # LDAP service account
  ldap:
    bind_password: ENC[AES256_GCM,data:...,tag:...,type:str]

  # Proxmox API access
  proxmox:
    api_token: ENC[AES256_GCM,data:...,tag:...,type:str]
    root_password: ENC[AES256_GCM,data:...,tag:...,type:str]

  # SSH keys for systems
  ssh:
    iroh_host_key: ENC[AES256_GCM,data:...,tag:...,type:str]
    admin_private_key: ENC[AES256_GCM,data:...,tag:...,type:str]

  # Application secrets
  gitlab:
    root_password: ENC[AES256_GCM,data:...,tag:...,type:str]
    secret_key_base: ENC[AES256_GCM,data:...,tag:...,type:str]

  wikijs:
    admin_password: ENC[AES256_GCM,data:...,tag:...,type:str]
    session_secret: ENC[AES256_GCM,data:...,tag:...,type:str]

# Public keys (not encrypted)
public_keys:
  ssh:
    admin: "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAI... admin@laptop"
    alice: "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAI... alice@workstation"
    bob: "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAAB... bob@desktop"

# Certificate authorities and certificates
certificates:
  ca:
    root_ca_cert: |
      -----BEGIN CERTIFICATE-----
      MIIBkTCB+wIJAI...
      -----END CERTIFICATE-----

  ssl:
    avatar_wildcard_cert: ENC[AES256_GCM,data:...,tag:...,type:str]
    avatar_wildcard_key: ENC[AES256_GCM,data:...,tag:...,type:str]